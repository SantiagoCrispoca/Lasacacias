<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Floristería Las Acacias</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <button class="cart-button">🛒</button>
      <div class="logo">
        <img src="imagenes/logo.jpg" alt="Logo de Floristería Las Acacias" />
      </div>
      <div class="search-box">
        <input type="text" id="search-input" placeholder="Buscar productos...">
        <div id="search-results" class="search-results"></div> <!-- Contenedor de sugerencias -->
      </div>    
    </header>

    <!-- Navegación -->
    <nav class="navbar">
      <ul>
        <li><a href="#inicio">Inicio</a></li>
        <li><a href="productos.html">Productos</a></li>
        <li><a href="quienes-somos.html">Quienes Somos</a></li>
        <li><a href="preguntas-frecuentes.html">Preguntas Frecuentes</a></li>
      </ul>
    </nav>

    <!-- Título "Productos destacados" -->
    <h1 class="featured-title">Productos destacados</h1>

    <!-- Carrusel de Imágenes -->
    <section id="inicio" class="carousel">
      <div class="carousel-inner">
        <div class="carousel-item flor-clickeable">
          <img src="imagenes/ramo-1.jpeg" alt="Flor 1" />
        </div>
        <div class="carousel-item flor-clickeable">
          <img src="imagenes/manojo-2.jpeg" alt="Flor 2" />
        </div>
        <div class="carousel-item flor-clickeable">
          <img src="imagenes/ramo-4.jpg" alt="Flor 3" />
        </div>
        <div class="carousel-item flor-clickeable">
          <img src="imagenes/manojo-5.jpeg" alt="Flor 4" />
        </div>
        <div class="carousel-item flor-clickeable">
          <img src="imagenes/ramo-6.jpg" alt="Flor 5" />
        </div>
        <div class="carousel-item flor-clickeable">
          <img src="imagenes/manojo-3.jpeg" alt="Flor 6" />
        </div>
        <div class="carousel-item flor-clickeable">
          <img src="imagenes/ramo-6.jpg" alt="Flor 7" />
        </div>
        <!-- Nuevas flores -->
        <div class="carousel-item flor-clickeable">
          <img src="imagenes/manojo-5.jpeg" alt="Flor 8" />
        </div>
        <div class="carousel-item flor-clickeable">
          <img src="imagenes/manojo-2.jpeg" alt="Flor 9" />
        </div>
      </div>
      <button class="carousel-control prev">&#10094;</button>
      <button class="carousel-control next">&#10095;</button>
    </section>

    <!-- Título "Productos de temporada" -->
    <h1 class="seasonal-title">Productos de temporada</h1>

    <!-- Cuadrícula de Productos de Temporada -->
    <section class="seasonal-grid">
      <div class="seasonal-item flor-clickeable">
        <img src="imagenes/ramo-1.jpeg" alt="Flor de temporada 1" />
      </div>
      <div class="seasonal-item flor-clickeable">
        <img src="imagenes/ramo-2.png" alt="Flor de temporada 2" />
      </div>
      <div class="seasonal-item flor-clickeable">
        <img src="imagenes/ramo-3.jpg" alt="Flor de temporada 3" />
      </div>
      <div class="seasonal-item flor-clickeable">
        <img src="imagenes/ramo-4.jpg" alt="Flor de temporada 4" />
      </div>
    </section>

    <!-- Ventana modal -->
    <div id="modal" class="modal">
      <div class="modal-contenido">
        <span class="cerrar-modal">&times;</span>
        <h2 id="modal-titulo">Nombre de la Flor</h2>
        <img id="modal-imagen" src="" alt="Flor" class="modal-imagen" />
        <p id="modal-descripcion">Descripción de la flor.</p>
        <p id="modal-precio">Precio: $XX.XXX</p>
        <div class="cantidad-agregar">
          <label for="cantidad">Cantidad:</label>
          <input type="number" id="cantidad" min="1" value="1" />
          <button id="agregar-carrito">Agregar al carrito</button>
        </div>
        <div class="mensaje">
          <label for="mensaje-flor">Mensaje para la flor:</label>
          <textarea
            id="mensaje-flor"
            rows="4"
            placeholder="Escribe tu mensaje aquí..."
          ></textarea>
        </div>
        <div class="accesorios">
          <label>Accesorios:</label>
          <select id="accesorios">
            <option value="ninguno">Ninguno</option>
            <option value="oso">Oso de peluche (+$10.000)</option>
            <option value="globo">Globo temático (+$5.000)</option>
            <option value="chocolate">Chocolate (+$7.000)</option>
            <option value="corona">Corona (+$8.000)</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Aviso de Cookies -->
    <div id="cookie-notice" class="cookie-notice">
      <p>Este sitio web utiliza cookies para mejorar tu experiencia.</p>
      <button id="accept-cookies" class="cookie-button">Aceptar</button>
    </div>

    <!-- Carrito de compras -->
    <div id="carrito-modal" class="carrito-modal">
      <div class="carrito-header">
        <h2>Tu Carrito</h2>
        <span class="cerrar-carrito">&times;</span>
      </div>
      <div id="carrito-items"></div>
      <div class="carrito-total">Total: $<span id="carrito-total">0</span></div>
      <button class="vaciar-carrito" id="vaciar-carrito">Vaciar Carrito</button>
    </div>

    <div class="confirmacion-agregado" id="confirmacion-agregado">
      Producto añadido al carrito!
    </div>

    <!-- Footer -->
    <footer>
      <p>&copy; 2023 Floristería Las Acacias</p>
    </footer>

    <!-- Script Interno -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Carrusel
        const carouselInner = document.querySelector(".carousel-inner");
        const items = document.querySelectorAll(".carousel-item"); // Se define items
        const visibleItems = 5; // Se define cuántos elementos se muestran a la vez

        const prevButton = document.querySelector(".carousel-control.prev");
        const nextButton = document.querySelector(".carousel-control.next");
        let currentIndex = 0;

        // Deshabilitar botón previo al inicio
        prevButton.disabled = true;
        nextButton.disabled = items.length <= visibleItems;

        function moveCarousel(direction) {
          if (direction === "next") {
            // Limita currentIndex para que nunca sobrepase el último conjunto completo
            currentIndex = Math.min(
              currentIndex + 1,
              items.length - visibleItems
            );
          } else {
            currentIndex = Math.max(currentIndex - 1, 0);
          }
          // Calcula el desplazamiento según el número de elementos visibles (cada item ocupa 20% en este caso)
          const offset = -currentIndex * (100 / visibleItems);
          carouselInner.style.transform = `translateX(${offset}%)`;

          // Actualiza el estado de los botones
          prevButton.disabled = currentIndex === 0;
          nextButton.disabled = currentIndex >= items.length - visibleItems;
        }

        prevButton.addEventListener("click", () => moveCarousel("prev"));
        nextButton.addEventListener("click", () => moveCarousel("next"));

        // Datos de las flores
        const datosFlores = [
          {
            nombre: "Productos destacados 1",
            imagen: "imagenes/ramo-1.jpeg",
            descripcion:
              "Un hermoso ramo de flores variadas, perfecto para cualquier ocasión.",
            precio: "$25.000",
          },
          {
            nombre: "Productos destacados 2",
            imagen: "imagenes/manojo-2.jpeg",
            descripcion:
              "Manojo de rosas blancas y rojas, ideal para expresar amor y pureza.",
            precio: "$18.000",
          },
          {
            nombre: "Productos destacados 3",
            imagen: "imagenes/ramo-4.jpg",
            descripcion: "Ramo de liliums y rosas, elegante y sofisticado.",
            precio: "$26.000",
          },
          {
            nombre: "Productos destacados 4",
            imagen: "imagenes/manojo-5.jpeg",
            descripcion: "Manojo de margaritas, fresco y juvenil.",
            precio: "$21.000",
          },
          {
            nombre: "Productos destacados 5",
            imagen: "imagenes/ramo-6.jpg",
            descripcion: "Ramo de flores silvestres, natural y encantador.",
            precio: "$23.000",
          },
          {
            nombre: "Productos destacados 6",
            imagen: "imagenes/manojo-3.jpeg",
            descripcion: "Manojo de claveles, clásico y duradero.",
            precio: "$17.000",
          },
          {
            nombre: "Productos destacados 7",
            imagen: "imagenes/ramo-6.jpg",
            descripcion:
              "Ramo de flores variadas, perfecto para cualquier ocasión.",
            precio: "$24.000",
          },
          {
            nombre: "Productos destacados 8",
            imagen: "imagenes/manojo-5.jpeg",
            descripcion: "Manojo de margaritas, fresco y juvenil.",
            precio: "$21.000",
          },
          {
            nombre: "Productos destacados 9",
            imagen: "imagenes/manojo-2.jpeg",
            descripcion:
              "Manojo de rosas blancas y rojas, ideal para expresar amor y pureza.",
            precio: "$18.000",
          },
          // Productos de temporada
          {
            nombre: "Flor de temporada 1",
            imagen: "imagenes/ramo-1.jpeg",
            descripcion:
              "Un hermoso ramo de flores de temporada, ideal para ocasiones especiales.",
            precio: "$20.000",
          },
          {
            nombre: "Flor de temporada 2",
            imagen: "imagenes/ramo-2.png",
            descripcion:
              "Ramo de tulipanes, perfecto para alegrar cualquier espacio.",
            precio: "$22.000",
          },
          {
            nombre: "Flor de temporada 3",
            imagen: "imagenes/ramo-3.jpg",
            descripcion: "Ramo de liliums, elegante y sofisticado.",
            precio: "$24.000",
          },
          {
            nombre: "Flor de temporada 4",
            imagen: "imagenes/ramo-4.jpg",
            descripcion:
              "Ramo de girasoles y margaritas, lleno de energía y frescura.",
            precio: "$21.000",
          },
        ];

        // Modal de Flores
        const flores = document.querySelectorAll(".flor-clickeable");
        const modal = document.getElementById("modal");
        const modalTitulo = document.getElementById("modal-titulo");
        const modalImagen = document.getElementById("modal-imagen");
        const modalDescripcion = document.getElementById("modal-descripcion");
        const modalPrecio = document.getElementById("modal-precio");
        const cerrarModal = document.querySelector(".cerrar-modal");

        flores.forEach((flor, index) => {
          flor.addEventListener("click", () => {
            const florData = datosFlores[index];
            modalTitulo.textContent = florData.nombre;
            modalImagen.src = florData.imagen;
            modalDescripcion.textContent = florData.descripcion;
            modalPrecio.textContent = `Precio: ${florData.precio}`;
            modal.style.display = "flex";
          });
        });

        cerrarModal.addEventListener("click", () => {
          modal.style.display = "none";
        });

        window.addEventListener("click", (event) => {
          if (event.target === modal) {
            modal.style.display = "none";
          }
        });

        // Variables globales
        let currentFlowerIndex = 0;
        let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
        const cartButton = document.querySelector(".cart-button");
        const carritoModal = document.getElementById("carrito-modal");
        const cerrarCarrito = document.querySelector(".cerrar-carrito");
        const vaciarCarritoBtn = document.getElementById("vaciar-carrito");

        // Función para actualizar el carrito
        function actualizarCarrito() {
          const carritoItems = document.getElementById("carrito-items");
          const carritoTotal = document.getElementById("carrito-total");
          let total = 0;

          carritoItems.innerHTML = "";

          carrito.forEach((item, index) => {
            const precio = parseInt(item.precio.replace(/\D/g, "")) || 0;
            const accesorioPrecio =
              item.accesorio === "ninguno"
                ? 0
                : item.accesorio === "oso"
                ? 10000
                : item.accesorio === "globo"
                ? 5000
                : item.accesorio === "chocolate"
                ? 7000
                : 8000;

            const subtotal = (precio + accesorioPrecio) * item.cantidad;
            total += subtotal;

            carritoItems.innerHTML += `
                    <div class="carrito-item">
                        <img src="${item.imagen}" alt="${item.nombre}">
                        <div>
                            <h3>${item.nombre}</h3>
                            <p>Cantidad: ${item.cantidad}</p>
                            ${
                              item.mensaje
                                ? `<p>Mensaje: ${item.mensaje}</p>`
                                : ""
                            }
                            ${
                              item.accesorio !== "ninguno"
                                ? `<p>Accesorio: ${item.accesorio}</p>`
                                : ""
                            }
                            <p>Subtotal: $${subtotal.toLocaleString()}</p>
                            <button class="eliminar-item" data-index="${index}">Eliminar</button>
                        </div>
                    </div>
                `;
          });

          carritoTotal.textContent = total.toLocaleString();
          localStorage.setItem("carrito", JSON.stringify(carrito));
          cartButton.setAttribute("data-count", carrito.length);
          cartButton.style.backgroundColor =
            carrito.length > 0 ? "#8cbaa3" : "#a8d5ba";
        }

        // Event listeners del carrito
        cartButton.addEventListener("click", () => {
          carritoModal.style.display = "block";
          actualizarCarrito();
        });

        cerrarCarrito.addEventListener("click", () => {
          carritoModal.style.display = "none";
        });

        // Eliminar item individual
        document.addEventListener("click", (e) => {
          if (e.target.classList.contains("eliminar-item")) {
            const index = e.target.dataset.index;
            carrito.splice(index, 1);
            actualizarCarrito();
          }
        });

        // Vaciar carrito
        vaciarCarritoBtn.addEventListener("click", () => {
          carrito = [];
          actualizarCarrito();
        });

        // Agregar al carrito
        document
          .getElementById("agregar-carrito")
          .addEventListener("click", () => {
            const cantidad = parseInt(
              document.getElementById("cantidad").value
            );
            const mensaje = document.getElementById("mensaje-flor").value;
            const accesorio = document.getElementById("accesorios").value;

            const nuevoItem = {
              ...datosFlores[currentFlowerIndex],
              cantidad: cantidad,
              mensaje: mensaje,
              accesorio: accesorio,
            };

            carrito.push(nuevoItem);

            const confirmacion = document.getElementById(
              "confirmacion-agregado"
            );
            confirmacion.style.display = "block";
            setTimeout(() => (confirmacion.style.display = "none"), 2000);

            actualizarCarrito();
            modal.style.display = "none";
          });
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
          // 1. Obtener referencias a los elementos del modal (los mismos que en el primer script)
          const modal = document.getElementById("modal");
          const modalTitulo = document.getElementById("modal-titulo");
          const modalImagen = document.getElementById("modal-imagen");
          const modalDescripcion = document.getElementById("modal-descripcion");
          const modalPrecio = document.getElementById("modal-precio");
          let currentFlowerIndex = 0; // Variable para rastrear el producto seleccionado
      
          // 2. Datos de productos para búsqueda (deben coincidir con datosFlores del primer script)
          const productos = [
              { id: "ramo-1", nombre: "Ramo de Rosas", imagen: "imagenes/ramo-1.jpeg" },
              { id: "ramo-2", nombre: "Ramo de Tulipanes", imagen: "imagenes/ramo-2.png" },
              { id: "ramo-3", nombre: "Ramo de Lirios", imagen: "imagenes/ramo-3.jpg" },
              { id: "ramo-4", nombre: "Ramo Mixto", imagen: "imagenes/ramo-4.jpg" },
              { id: "ramo-5", nombre: "Ramo de Margaritas", imagen: "imagenes/ramo-5.jpg" },
              { id: "ramo-6", nombre: "Ramo de Girasoles", imagen: "imagenes/ramo-6.jpg" },
              { id: "ramo-7", nombre: "Ramo de Claveles", imagen: "imagenes/ramo-7.jpg" },
              { id: "ramo-8", nombre: "Ramo de Peonias", imagen: "imagenes/ramo-8.jpg" },
              { id: "manojo-1", nombre: "Manojo de Lavanda", imagen: "imagenes/manojo-1.jpeg" },
              { id: "manojo-2", nombre: "Manojo de Romero", imagen: "imagenes/manojo-2.jpeg" },
              { id: "manojo-3", nombre: "Manojo de Eucalipto", imagen: "imagenes/manojo-3.jpeg" },
              { id: "manojo-4", nombre: "Manojo de Hierbabuena", imagen: "imagenes/manojo-4.jpeg" },
              { id: "manojo-5", nombre: "Manojo de Albahaca", imagen: "imagenes/manojo-5.jpeg" },
              { id: "manojo-6", nombre: "Manojo de Cilantro", imagen: "imagenes/manojo-6.jpeg" },
              { id: "manojo-7", nombre: "Manojo de Tomillo", imagen: "imagenes/manojo-7.jpg" },
              { id: "manojo-8", nombre: "Manojo de Menta", imagen: "imagenes/manojo-8.jpg" }
          ];
      
          // 3. Datos completos de flores (deben coincidir exactamente con los del primer script)
          const datosFlores = [
              // Productos destacados
              { nombre: "Productos destacados 1", imagen: "imagenes/ramo-1.jpeg", descripcion: "Un hermoso ramo de flores variadas.", precio: "$25.000" },
              { nombre: "Productos destacados 2", imagen: "imagenes/manojo-2.jpeg", descripcion: "Manojo de rosas blancas y rojas.", precio: "$18.000" },
              { nombre: "Productos destacados 3", imagen: "imagenes/ramo-4.jpg", descripcion: "Ramo de liliums y rosas.", precio: "$26.000" },
              { nombre: "Productos destacados 4", imagen: "imagenes/manojo-5.jpeg", descripcion: "Manojo de margaritas.", precio: "$21.000" },
              { nombre: "Productos destacados 5", imagen: "imagenes/ramo-6.jpg", descripcion: "Ramo de flores silvestres.", precio: "$23.000" },
              { nombre: "Productos destacados 6", imagen: "imagenes/manojo-3.jpeg", descripcion: "Manojo de claveles.", precio: "$17.000" },
              { nombre: "Productos destacados 7", imagen: "imagenes/ramo-6.jpg", descripcion: "Ramo de flores variadas.", precio: "$24.000" },
              { nombre: "Productos destacados 8", imagen: "imagenes/manojo-5.jpeg", descripcion: "Manojo de margaritas.", precio: "$21.000" },
              { nombre: "Productos destacados 9", imagen: "imagenes/manojo-2.jpeg", descripcion: "Manojo de rosas blancas y rojas.", precio: "$18.000" },
              // Productos de temporada
              { nombre: "Flor de temporada 1", imagen: "imagenes/ramo-1.jpeg", descripcion: "Ramo de flores de temporada.", precio: "$20.000" },
              { nombre: "Flor de temporada 2", imagen: "imagenes/ramo-2.png", descripcion: "Ramo de tulipanes.", precio: "$22.000" },
              { nombre: "Flor de temporada 3", imagen: "imagenes/ramo-3.jpg", descripcion: "Ramo de liliums.", precio: "$24.000" },
              { nombre: "Flor de temporada 4", imagen: "imagenes/ramo-4.jpg", descripcion: "Ramo de girasoles y margaritas.", precio: "$21.000" }
          ];
      
          // 4. Configuración de la búsqueda
          const searchInput = document.getElementById("search-input");
          const searchResults = document.getElementById("search-results");
      
          searchInput.addEventListener("input", function () {
              const query = this.value.trim().toLowerCase();
              searchResults.innerHTML = "";
      
              if (query.length > 0) {
                  const filtrados = productos.filter(producto =>
                      producto.nombre.toLowerCase().includes(query) || 
                      producto.id.toLowerCase().includes(query)
                  );
                  mostrarResultados(filtrados);
              } else {
                  searchResults.style.display = "none";
              }
          });
      
          function mostrarResultados(filtrados) {
              if (filtrados.length === 0) {
                  searchResults.style.display = "none";
                  return;
              }
      
              searchResults.style.display = "block";
              searchResults.innerHTML = ""; // Limpiar resultados anteriores
      
              filtrados.forEach(producto => {
                  const div = document.createElement("div");
                  div.className = "resultado-busqueda";
                  div.innerHTML = `
                      <img src="${producto.imagen}" alt="${producto.nombre}" width="40">
                      <span>${producto.nombre}</span>
                  `;
                  div.addEventListener("click", () => abrirModalProducto(producto));
                  searchResults.appendChild(div);
              });
          }
      
          // 5. Función para abrir el modal
          function abrirModalProducto(producto) {
              console.log("Abriendo modal para:", producto);
              
              // Buscar el producto en datosFlores por la imagen
              const productoCompleto = datosFlores.find(item => item.imagen === producto.imagen);
              
              if (productoCompleto) {
                  modalTitulo.textContent = productoCompleto.nombre;
                  modalImagen.src = productoCompleto.imagen;
                  modalDescripcion.textContent = productoCompleto.descripcion;
                  modalPrecio.textContent = `Precio: ${productoCompleto.precio}`;
                  modal.style.display = "flex";
                  
                  // Actualizar el índice para el carrito
                  currentFlowerIndex = datosFlores.indexOf(productoCompleto);
              } else {
                  console.error("Producto no encontrado en datosFlores:", producto);
                  alert("Producto no disponible temporalmente");
              }
              
              searchResults.style.display = "none";
          }
      
          // 6. Cerrar resultados al hacer clic fuera
          document.addEventListener("click", function (event) {
              if (!searchInput.contains(event.target) && !searchResults.contains(event.target)) {
                  searchResults.style.display = "none";
              }
          });
      });
      </script>
  </body>
</html>
