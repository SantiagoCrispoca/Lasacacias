<!DOCTYPE html>
<html lang="es">

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos - Floristería Las Acacias</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <button class="cart-button">🛒</button>
        <div class="logo">
            <a href="index.html">
              <img src="imagenes/logo.jpg" alt="Logo de Floristería Las Acacias" />
            </a>
          </div>
        <div class="search-box">
            <input type="text" id="search-input" placeholder="Buscar productos...">
            <div id="search-results" class="search-results"></div> 
        </div>        
    </header>

    <!-- Navegación -->
    <nav class="navbar">
        <ul>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="productos.html">Productos</a></li>
            <li><a href="quienes-somos.html">Quienes Somos</a></li>
            <li><a href="preguntas-frecuentes.html">Preguntas Frecuentes</a></li>
        </ul>
    </nav>

    <!-- Sección de Manojos -->
    <section class="productos-section">
        <h2>Manojos</h2>
        <div class="productos-grid">
            <!-- Flor 1 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-1.jpeg" alt="Manojo 1">
            </div>
            <!-- Flor 2 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-2.jpeg" alt="Manojo 2">
            </div>
            <!-- Flor 3 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-3.jpeg" alt="Manojo 3">
            </div>
            <!-- Flor 4 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-4.jpeg" alt="Manojo 4">
            </div>
            <!-- Flor 5 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-5.jpeg" alt="Manojo 5">
            </div>
            <!-- Flor 6 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-6.jpeg" alt="Manojo 6">
            </div>
            <!-- Flor 7 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-7.jpg" alt="Manojo 7">
            </div>
            <!-- Flor 8 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-8.jpg" alt="Manojo 8">
            </div>
        </div>
    </section>

    <!-- Sección de Ramos -->
    <section class="productos-section">
        <h2>Ramos</h2>
        <div class="productos-grid">
            <!-- Flor 1 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-1.jpeg" alt="Ramo 1">
            </div>
            <!-- Flor 2 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-2.png" alt="Ramo 2">
            </div>
            <!-- Flor 3 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-3.jpg" alt="Ramo 3">
            </div>
            <!-- Flor 4 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-4.jpg" alt="Ramo 4">
            </div>
            <!-- Flor 5 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-5.jpg" alt="Ramo 5">
            </div>
            <!-- Flor 6 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-6.jpg" alt="Ramo 6">
            </div>
            <!-- Flor 7 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-7.jpg" alt="Ramo 7">
            </div>
            <!-- Flor 8 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-8.jpg" alt="Ramo 8">
            </div>
        </div>
    </section>

    <!-- Ventana modal -->
    <div id="modal" class="modal">
        <div class="modal-contenido">
            <!-- Botón para cerrar la ventana modal -->
            <span class="cerrar-modal">&times;</span>

            <!-- Contenido de la ventana modal -->
            <h2 id="modal-titulo">Nombre de la Flor</h2>
            <img id="modal-imagen" src="" alt="Flor" class="modal-imagen">
            <p id="modal-descripcion">Descripción de la flor.</p>
            <p id="modal-precio">Precio: $XX.XXX</p>

            <!-- Cantidad y botón para agregar al carrito -->
            <div class="cantidad-agregar">
                <label for="cantidad">Cantidad:</label>
                <input type="number" id="cantidad" min="1" value="1">
                <button id="agregar-carrito">Agregar al carrito</button>
            </div>

            <!-- Mensaje personalizado -->
            <div class="mensaje">
                <label for="mensaje-flor">Mensaje para la flor:</label>
                <textarea id="mensaje-flor" rows="4" placeholder="Escribe tu mensaje aquí..."></textarea>
            </div>

            <!-- Accesorios -->
            <div class="accesorios">
                <label>Accesorios:</label>
                <select id="accesorios">
                    <option value="ninguno">Ninguno</option>
                    <option value="oso">Oso de peluche (+$10.000)</option>
                    <option value="globo">Globo temático (+$5.000)</option>
                    <option value="chocolate">Chocolate (+$7.000)</option>
                    <option value="corona">Corona (+$8.000)</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Carrito de compras -->
    <div id="carrito-modal" class="carrito-modal">
        <div class="carrito-header">
            <h2>Tu Carrito</h2>
            <span class="cerrar-carrito">&times;</span>
        </div>
        <div id="carrito-items"></div>
        <div class="carrito-total">Total: $<span id="carrito-total">0</span></div>
        <div class="carrito-botones">
            <button class="vaciar-carrito" id="vaciar-carrito">Vaciar Carrito</button>
            <a href="pagos.html" class="pagar-carrito">Ir a pagar</a>
        </div>
    </div>

    <div class="confirmacion-agregado" id="confirmacion-agregado">
        Producto añadido al carrito!
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <!-- Sección izquierda (Contáctanos) -->
            <div class="footer-section">
                <h3>Contáctanos</h3>
                <p>
                    <i class="fab fa-whatsapp"></i> +57 321 9694834
                </p>
                <p>
                    <i class="fa-solid fa-envelope"></i> lasacaciasfloristeria@gmail.com
                </p>
            </div>

            <!-- Sección central (Formas de pago) -->
            <div class="footer-section">
                <h3>Formas de pago</h3>
                <img src="imagenes/NequiLogo.png" alt="Nequi" style="width: 60px;">
            </div>

            <!-- Sección derecha (Redes) -->
            <div class="footer-section">
                <h3>Redes</h3>
                <p>
                    <a href="https://www.facebook.com/share/1Ahi9w2jai/" target="_blank" rel="noopener noreferrer">
                        <img src="imagenes/Facebook.png" alt="Facebook" class="social-btn">
                    </a>
                    <a href="https://www.instagram.com/lasacaciasflores/" target="_blank" rel="noopener noreferrer">
                        <img src="imagenes/instagram.png" alt="Instagram" class="social-btn">
                    </a>
                </p>
            </div>
        </div> <!-- Cierra el contenedor principal -->

        <!-- Sección de copyright -->
        <div class="footer-copy">
            <p>© 2023 Floristería Las Acacias</p>
        </div>
    </footer>

        <script>

            // -------------------- COOKIES --------------------
    const cookieNotice = document.getElementById('cookie-notice');
    const acceptCookiesButton = document.getElementById('accept-cookies');
    if (acceptCookiesButton) {
        acceptCookiesButton.addEventListener('click', () => {
            cookieNotice.style.display = 'none';
            localStorage.setItem('cookiesAccepted', 'true');
        });
        if (localStorage.getItem('cookiesAccepted') === 'true') {
            cookieNotice.style.display = 'none';
        }
    }

    // -------------------- DATOS Y MODAL --------------------
    const datosFlores = [
    // MANOJOS (8)
    {
        nombre: "Manojo de Lavanda",
        imagen: "imagenes/manojo-1.jpeg",
        descripcion: "Aroma relajante para espacios interiores.",
        precio: "$15.000"
    },
    {
        nombre: "Manojo de Romero",
        imagen: "imagenes/manojo-2.jpeg",
        descripcion: "Hierba aromática para cocina y decoración.",
        precio: "$12.000"
    },
    {
        nombre: "Manojo de Eucalipto",
        imagen: "imagenes/manojo-3.jpeg",
        descripcion: "Perfecto para ambientes naturales.",
        precio: "$14.000"
    },
    {
        nombre: "Manojo de Hierbabuena",
        imagen: "imagenes/manojo-4.jpeg",
        descripcion: "Frescura intensa para cócteles e infusiones.",
        precio: "$13.000"
    },
    {
        nombre: "Manojo de Albahaca",
        imagen: "imagenes/manojo-5.jpeg",
        descripcion: "Hierba fresca para tus recetas italianas.",
        precio: "$11.000"
    },
    {
        nombre: "Manojo de Cilantro",
        imagen: "imagenes/manojo-6.jpeg",
        descripcion: "Aroma esencial para cocina asiática.",
        precio: "$10.000"
    },
    {
        nombre: "Manojo de Tomillo",
        imagen: "imagenes/manojo-7.jpg",
        descripcion: "Aroma terroso para guisos y carnes.",
        precio: "$16.000"
    },
    {
        nombre: "Manojo de Menta",
        imagen: "imagenes/manojo-8.jpg",
        descripcion: "Versátil para bebidas y postres.",
        precio: "$12.000"
    },

    // RAMOS (8)
    {
        nombre: "Ramo de Rosas Clásicas",
        imagen: "imagenes/ramo-1.jpeg",
        descripcion: "Elegancia en tonos rojos y blancos.",
        precio: "$35.000"
    },
    {
        nombre: "Ramo de Tulipanes",
        imagen: "imagenes/ramo-2.png",
        descripcion: "Colorido y alegre para primavera.",
        precio: "$28.000"
    },
    {
        nombre: "Ramo de Lirios",
        imagen: "imagenes/ramo-3.jpg",
        descripcion: "Sofisticación en tonos pastel.",
        precio: "$40.000"
    },
    {
        nombre: "Ramo de Girasoles",
        imagen: "imagenes/ramo-4.jpg",
        descripcion: "Energía y calidez veraniega.",
        precio: "$32.000"
    },
    {
        nombre: "Ramo de Margaritas",
        imagen: "imagenes/ramo-5.jpg",
        descripcion: "Simplicidad campestre.",
        precio: "$25.000"
    },
    {
        nombre: "Ramo de Claveles",
        imagen: "imagenes/ramo-6.jpg",
        descripcion: "Duradero y lleno de textura.",
        precio: "$27.000"
    },
    {
        nombre: "Ramo de Peonias",
        imagen: "imagenes/ramo-7.jpg",
        descripcion: "Romanticismo en tonos rosados.",
        precio: "$45.000"
    },
    {
        nombre: "Ramo de Orquídeas",
        imagen: "imagenes/ramo-8.jpg",
        descripcion: "Exclusividad tropical.",
        precio: "$50.000"
    }
    ];

    const productos = [
        // Manojos
        { id: "manojo-1", nombre: "Manojo de Lavanda", imagen: "imagenes/manojo-1.jpeg" },
        { id: "manojo-2", nombre: "Manojo de Romero", imagen: "imagenes/manojo-2.jpeg" },
        { id: "manojo-3", nombre: "Manojo de Eucalipto", imagen: "imagenes/manojo-3.jpeg" },
        { id: "manojo-4", nombre: "Manojo de Hierbabuena", imagen: "imagenes/manojo-4.jpeg" },
        { id: "manojo-5", nombre: "Manojo de Albahaca", imagen: "imagenes/manojo-5.jpeg" },
        { id: "manojo-6", nombre: "Manojo de Cilantro", imagen: "imagenes/manojo-6.jpeg" },
        { id: "manojo-7", nombre: "Manojo de Tomillo", imagen: "imagenes/manojo-7.jpg" },
        { id: "manojo-8", nombre: "Manojo de Menta", imagen: "imagenes/manojo-8.jpg" },
        
        // Ramos
        { id: "ramo-1", nombre: "Ramo de Rosas Clásicas", imagen: "imagenes/ramo-1.jpeg" },
        { id: "ramo-2", nombre: "Ramo de Tulipanes", imagen: "imagenes/ramo-2.png" },
        { id: "ramo-3", nombre: "Ramo de Lirios", imagen: "imagenes/ramo-3.jpg" },
        { id: "ramo-4", nombre: "Ramo de Girasoles", imagen: "imagenes/ramo-4.jpg" },
        { id: "ramo-5", nombre: "Ramo de Margaritas", imagen: "imagenes/ramo-5.jpg" },
        { id: "ramo-6", nombre: "Ramo de Claveles", imagen: "imagenes/ramo-6.jpg" },
        { id: "ramo-7", nombre: "Ramo de Peonias", imagen: "imagenes/ramo-7.jpg" },
        { id: "ramo-8", nombre: "Ramo de Orquídeas", imagen: "imagenes/ramo-8.jpg" }
    ];

      // -------------------- MODAL --------------------
    const modal = document.getElementById('modal');
    const modalTitulo = document.getElementById('modal-titulo');
    const modalImagen = document.getElementById('modal-imagen');
    const modalDescripcion = document.getElementById('modal-descripcion');
    const modalPrecio = document.getElementById('modal-precio');
    const cerrarModal = document.querySelector('.cerrar-modal');
    let currentFlowerIndex = 0;

    // Manejo de clics en flores
    document.querySelectorAll('.flor-clickeable').forEach((flor) => {
        flor.addEventListener('click', () => {
            const imgSrc = flor.querySelector('img').getAttribute('src');
            const producto = datosFlores.find(item => item.imagen === imgSrc);
            
            if (producto) {
                currentFlowerIndex = datosFlores.indexOf(producto);
                abrirModal(producto);
            }
        });
    });

    function abrirModal(producto) {
        modalTitulo.textContent = producto.nombre;
        modalImagen.src = producto.imagen;
        modalDescripcion.textContent = producto.descripcion;
        modalPrecio.textContent = `Precio: ${producto.precio}`;
        modal.style.display = 'flex';
    }

    // Cerrar modal
    cerrarModal.addEventListener('click', () => modal.style.display = 'none');
    window.addEventListener('click', (e) => e.target === modal && (modal.style.display = 'none'));

     // -------------------- BÚSQUEDA --------------------
    const searchInput = document.getElementById('search-input');
    const searchResults = document.getElementById('search-results');

    searchInput.addEventListener('input', function() {
        const query = this.value.trim().toLowerCase();
        searchResults.innerHTML = '';
        
        if (query) {
            const filtrados = productos
                .filter(p => 
                    p.nombre.toLowerCase().includes(query) || 
                    p.id.toLowerCase().includes(query)
                )
                .map(p => ({
                    ...p,
                    data: datosFlores.find(f => f.imagen === p.imagen)
                }));

            mostrarResultados(filtrados);
        } else {
            searchResults.style.display = 'none';
        }
    });

    function mostrarResultados(resultados) {
        searchResults.innerHTML = resultados.map(p => `
            <div class="resultado-busqueda">
                <img src="${p.imagen}" alt="${p.nombre}" width="40">
                <span>${p.nombre}</span>
            </div>
        `).join('');
        
        searchResults.style.display = resultados.length ? 'block' : 'none';
        searchResults.querySelectorAll('.resultado-busqueda').forEach((item, i) => {
            item.addEventListener('click', () => abrirModal(resultados[i].data));
        });
    }

    // -------------------- CARRITO --------------------
        const agregarCarritoBtn = document.getElementById('agregar-carrito'); // 🛒 Botón de agregar
        const cartButton = document.querySelector('.cart-button');
        const carritoModal = document.getElementById('carrito-modal');
        const cerrarCarrito = document.querySelector('.cerrar-carrito');

        cerrarCarrito.addEventListener('click', () => {
            carritoModal.style.display = 'none';
        });

        let carrito = JSON.parse(localStorage.getItem('carrito')) || [];

        cartButton.addEventListener('click', () => {
            carritoModal.style.display = 'block';
            actualizarCarrito();
        });

        // Función para actualizar el carrito
        function actualizarCarrito() {
            const carritoItems = document.getElementById('carrito-items');
            const carritoTotal = document.getElementById('carrito-total');
            let total = 0;

            carritoItems.innerHTML = '';

            carrito.forEach((item, index) => {
                const precio = parseInt(item.precio.replace(/\D/g, '')) || 0;
                const accesorioPrecio = item.accesorio === 'ninguno' ? 0 :
                    item.accesorio === 'oso' ? 10000 :
                        item.accesorio === 'globo' ? 5000 :
                            item.accesorio === 'chocolate' ? 7000 : 8000;

                const subtotal = (precio + accesorioPrecio) * item.cantidad;
                total += subtotal;

                carritoItems.innerHTML += `
                <div class="carrito-item">
                    <img src="${item.imagen}" alt="${item.nombre}">
                    <div>
                        <h3>${item.nombre}</h3>
                        <p>Cantidad: ${item.cantidad}</p>
                        ${item.mensaje ? `<p>Mensaje: ${item.mensaje}</p>` : ''}
                        ${item.accesorio !== 'ninguno' ? `<p>Accesorio: ${item.accesorio}</p>` : ''}
                        <p>Subtotal: $${subtotal.toLocaleString()}</p>
                        <button class="eliminar-item" data-index="${index}">Eliminar</button>
                    </div>
                </div>
            `;
            });

            carritoTotal.textContent = total.toLocaleString();
            localStorage.setItem('carrito', JSON.stringify(carrito));
            cartButton.setAttribute('data-count', carrito.length);
            cartButton.style.backgroundColor = carrito.length > 0 ? '#8cbaa3' : '#a8d5ba';
        }

        function agregarAlCarrito() {
            const cantidad = parseInt(document.getElementById('cantidad').value);
            const mensaje = document.getElementById('mensaje-flor').value;
            const accesorio = document.getElementById('accesorios').value;

            const nuevoItem = {
                ...datosFlores[currentFlowerIndex],
                cantidad: cantidad,
                mensaje: mensaje,
                accesorio: accesorio
            };

            carrito.push(nuevoItem);

            // Mostrar confirmación
            const confirmacion = document.getElementById('confirmacion-agregado');
            confirmacion.style.display = 'block';
            setTimeout(() => confirmacion.style.display = 'none', 2000);

            actualizarCarrito();
            modal.style.display = 'none';
        }

        cartButton.addEventListener('click', () => {
            carritoModal.style.display = 'block';
            actualizarCarrito(); // Para refrescar los items
        });

        agregarCarritoBtn.addEventListener('click', agregarAlCarrito);

        // Eliminar item individual
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('eliminar-item')) {
                const index = e.target.dataset.index;
                carrito.splice(index, 1);
                actualizarCarrito();
            }
        });

        // Vaciar carrito
        const vaciarCarritoBtn = document.getElementById('vaciar-carrito');
        vaciarCarritoBtn.addEventListener('click', () => {
            carrito = [];
            actualizarCarrito();
        });
  </script>
</body>

</html>