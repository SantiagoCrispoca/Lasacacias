<!DOCTYPE html>
<html lang="es">

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos - Floristería Las Acacias</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <button class="cart-button">🛒</button>
        <div class="logo">
            <a href="index.html">
              <img src="imagenes/logo.jpg" alt="Logo de Floristería Las Acacias" />
            </a>
          </div>
        <div class="search-box">
            <input type="text" id="search-input" placeholder="Buscar productos...">
            <div id="search-results" class="search-results"></div> 
        </div>        
    </header>

    <!-- Navegación -->
    <nav class="navbar">
        <ul>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="productos.html">Productos</a></li>
            <li><a href="quienes-somos.html">Quienes Somos</a></li>
            <li><a href="preguntas-frecuentes.html">Preguntas Frecuentes</a></li>
        </ul>
    </nav>

    <!-- Sección de Manojos -->
    <section class="productos-section">
        <h2>Manojos</h2>
        <div class="productos-grid">
            <!-- Flor 1 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-1.jpeg" alt="Manojo 1">
            </div>
            <!-- Flor 2 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-2.jpeg" alt="Manojo 2">
            </div>
            <!-- Flor 3 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-3.jpeg" alt="Manojo 3">
            </div>
            <!-- Flor 4 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-4.jpeg" alt="Manojo 4">
            </div>
            <!-- Flor 5 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-5.jpeg" alt="Manojo 5">
            </div>
            <!-- Flor 6 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-6.jpeg" alt="Manojo 6">
            </div>
            <!-- Flor 7 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-7.jpg" alt="Manojo 7">
            </div>
            <!-- Flor 8 -->
            <div class="flor-clickeable">
                <img src="imagenes/manojo-8.jpg" alt="Manojo 8">
            </div>
        </div>
    </section>

    <!-- Sección de Ramos -->
    <section class="productos-section">
        <h2>Ramos</h2>
        <div class="productos-grid">
            <!-- Flor 1 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-1.jpeg" alt="Ramo 1">
            </div>
            <!-- Flor 2 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-2.png" alt="Ramo 2">
            </div>
            <!-- Flor 3 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-3.jpg" alt="Ramo 3">
            </div>
            <!-- Flor 4 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-4.jpg" alt="Ramo 4">
            </div>
            <!-- Flor 5 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-5.jpg" alt="Ramo 5">
            </div>
            <!-- Flor 6 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-6.jpg" alt="Ramo 6">
            </div>
            <!-- Flor 7 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-7.jpg" alt="Ramo 7">
            </div>
            <!-- Flor 8 -->
            <div class="flor-clickeable">
                <img src="imagenes/ramo-8.jpg" alt="Ramo 8">
            </div>
        </div>
    </section>

    <!-- Ventana modal -->
    <div id="modal" class="modal">
        <div class="modal-contenido">
            <!-- Botón para cerrar la ventana modal -->
            <span class="cerrar-modal">&times;</span>

            <!-- Contenido de la ventana modal -->
            <h2 id="modal-titulo">Nombre de la Flor</h2>
            <img id="modal-imagen" src="" alt="Flor" class="modal-imagen">
            <p id="modal-descripcion">Descripción de la flor.</p>
            <p id="modal-precio">Precio: $XX.XXX</p>

            <!-- Cantidad y botón para agregar al carrito -->
            <div class="cantidad-agregar">
                <label for="cantidad">Cantidad:</label>
                <input type="number" id="cantidad" min="1" value="1">
                <button id="agregar-carrito">Agregar al carrito</button>
            </div>

            <!-- Mensaje personalizado -->
            <div class="mensaje">
                <label for="mensaje-flor">Mensaje para la flor:</label>
                <textarea id="mensaje-flor" rows="4" placeholder="Escribe tu mensaje aquí..."></textarea>
            </div>

            <!-- Accesorios -->
            <div class="accesorios">
                <label>Accesorios:</label>
                <select id="accesorios">
                    <option value="ninguno">Ninguno</option>
                    <option value="oso">Oso de peluche (+$10.000)</option>
                    <option value="globo">Globo temático (+$5.000)</option>
                    <option value="chocolate">Chocolate (+$7.000)</option>
                    <option value="corona">Corona (+$8.000)</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Carrito de compras -->
    <div id="carrito-modal" class="carrito-modal">
        <div class="carrito-header">
            <h2>Tu Carrito</h2>
            <span class="cerrar-carrito">&times;</span>
        </div>
        <div id="carrito-items"></div>
        <div class="carrito-total">Total: $<span id="carrito-total">0</span></div>
        <div class="carrito-botones">
            <button class="vaciar-carrito" id="vaciar-carrito">Vaciar Carrito</button>
            <a href="pagos.html" class="pagar-carrito">Ir a pagar</a>
        </div>
    </div>

    <div class="confirmacion-agregado" id="confirmacion-agregado">
        Producto añadido al carrito!
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <!-- Sección izquierda (Contáctanos) -->
            <div class="footer-section">
                <h3>Contáctanos</h3>
                <p>
                    <i class="fab fa-whatsapp"></i> +57 321 9694834
                </p>
                <p>
                    <i class="fa-solid fa-envelope"></i> lasacaciasfloristeria@gmail.com
                </p>
            </div>

            <!-- Sección central (Formas de pago) -->
            <div class="footer-section">
                <h3>Formas de pago</h3>
                <img src="imagenes/NequiLogo.png" alt="Nequi" style="width: 60px;">
            </div>

            <!-- Sección derecha (Redes) -->
            <div class="footer-section">
                <h3>Redes</h3>
                <p>
                    <a href="https://www.facebook.com/share/1Ahi9w2jai/" target="_blank" rel="noopener noreferrer">
                        <img src="imagenes/Facebook.png" alt="Facebook" class="social-btn">
                    </a>
                    <a href="https://www.instagram.com/lasacaciasflores/" target="_blank" rel="noopener noreferrer">
                        <img src="imagenes/instagram.png" alt="Instagram" class="social-btn">
                    </a>
                </p>
            </div>
        </div> <!-- Cierra el contenedor principal -->

        <!-- Sección de copyright -->
        <div class="footer-copy">
            <p>© 2023 Floristería Las Acacias</p>
        </div>
    </footer>

    <!-- Script para la ventana modal -->
    <script>
        // Seleccionar todas las flores clickeables
        const flores = document.querySelectorAll('.flor-clickeable');

        // Seleccionar elementos de la ventana modal
        const modal = document.getElementById('modal');
        const modalTitulo = document.getElementById('modal-titulo');
        const modalImagen = document.getElementById('modal-imagen');
        const modalDescripcion = document.getElementById('modal-descripcion');
        const modalPrecio = document.getElementById('modal-precio');
        const cerrarModal = document.querySelector('.cerrar-modal');

        // Datos de las flores (puedes cambiarlos más tarde)
        const datosFlores = [
            // Manojos
            {
                nombre: "Manojo 1",
                imagen: "imagenes/manojo-1.jpeg",
                descripcion: "Un hermoso manojo de flores variadas, perfecto para cualquier ocasión.",
                precio: "$20.000"
            },
            {
                nombre: "Manojo 2",
                imagen: "imagenes/manojo-2.jpeg",
                descripcion: "Manojo de rosas blancas y rojas, ideal para expresar amor y pureza.",
                precio: "$18.000"
            },
            {
                nombre: "Manojo 3",
                imagen: "imagenes/manojo-3.jpeg",
                descripcion: "Manojo de girasoles, lleno de energía y alegría.",
                precio: "$22.000"
            },
            {
                nombre: "Manojo 4",
                imagen: "imagenes/manojo-4.jpeg",
                descripcion: "Manojo de liliums, elegante y sofisticado.",
                precio: "$19.000"
            },
            {
                nombre: "Manojo 5",
                imagen: "imagenes/manojo-5.jpeg",
                descripcion: "Manojo de margaritas, fresco y juvenil.",
                precio: "$21.000"
            },
            {
                nombre: "Manojo 6",
                imagen: "imagenes/manojo-6.jpeg",
                descripcion: "Manojo de claveles, clásico y duradero.",
                precio: "$17.000"
            },
            {
                nombre: "Manojo 7",
                imagen: "imagenes/manojo-7.jpg",
                descripcion: "Manojo de orquídeas, exótico y llamativo.",
                precio: "$23.000"
            },
            {
                nombre: "Manojo 8",
                imagen: "imagenes/manojo-8.jpg",
                descripcion: "Manojo de flores silvestres, natural y encantador.",
                precio: "$20.000"
            },
            // Ramos
            {
                nombre: "Ramo 1",
                imagen: "imagenes/ramo-1.jpeg",
                descripcion: "Ramo de rosas rojas, el clásico símbolo del amor.",
                precio: "$25.000"
            },
            {
                nombre: "Ramo 2",
                imagen: "imagenes/ramo-2.png",
                descripcion: "Ramo de tulipanes, perfecto para alegrar cualquier espacio.",
                precio: "$24.000"
            },
            {
                nombre: "Ramo 3",
                imagen: "imagenes/ramo-3.jpg",
                descripcion: "Ramo de liliums y rosas, elegante y sofisticado.",
                precio: "$26.000"
            },
            {
                nombre: "Ramo 4",
                imagen: "imagenes/ramo-4.jpg",
                descripcion: "Ramo de girasoles y margaritas, lleno de energía y frescura.",
                precio: "$22.000"
            },
            {
                nombre: "Ramo 5",
                imagen: "imagenes/ramo-5.jpg",
                descripcion: "Ramo de orquídeas y claveles, exótico y llamativo.",
                precio: "$27.000"
            },
            {
                nombre: "Ramo 6",
                imagen: "imagenes/ramo-6.jpg",
                descripcion: "Ramo de flores silvestres, natural y encantador.",
                precio: "$23.000"
            },
            {
                nombre: "Ramo 7",
                imagen: "imagenes/ramo-7.jpg",
                descripcion: "Ramo de rosas blancas, ideal para bodas y eventos especiales.",
                precio: "$28.000"
            },
            {
                nombre: "Ramo 8",
                imagen: "imagenes/ramo-8.jpg",
                descripcion: "Ramo de flores variadas, perfecto para cualquier ocasión.",
                precio: "$24.000"
            }
        ];

        // Abrir la ventana modal con los datos de la flor
        flores.forEach((flor, index) => {
            flor.addEventListener('click', () => {
                currentFlowerIndex = index;
                const florData = datosFlores[index];
                modalTitulo.textContent = florData.nombre;
                modalImagen.src = florData.imagen;
                modalDescripcion.textContent = florData.descripcion;
                modalPrecio.textContent = `Precio: ${florData.precio}`;
                modal.style.display = 'flex'; // Mostrar la ventana modal
            });
        });

        // Cerrar la ventana modal
        cerrarModal.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        // Cerrar la ventana modal si se hace clic fuera de ella
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Al inicio del script, después de definir los elementos del DOM
        let currentFlowerIndex = 0; // 🔑 Variable clave que faltaba
        const agregarCarritoBtn = document.getElementById('agregar-carrito'); // 🛒 Botón de agregar
        const cartButton = document.querySelector('.cart-button');
        const carritoModal = document.getElementById('carrito-modal');
        const cerrarCarrito = document.querySelector('.cerrar-carrito');

        cerrarCarrito.addEventListener('click', () => {
            carritoModal.style.display = 'none';
        });

        let carrito = JSON.parse(localStorage.getItem('carrito')) || [];

        cartButton.addEventListener('click', () => {
            carritoModal.style.display = 'block';
            actualizarCarrito();
        });

        // Función para actualizar el carrito
        function actualizarCarrito() {
            const carritoItems = document.getElementById('carrito-items');
            const carritoTotal = document.getElementById('carrito-total');
            let total = 0;

            carritoItems.innerHTML = '';

            carrito.forEach((item, index) => {
                const precio = parseInt(item.precio.replace(/\D/g, '')) || 0;
                const accesorioPrecio = item.accesorio === 'ninguno' ? 0 :
                    item.accesorio === 'oso' ? 10000 :
                        item.accesorio === 'globo' ? 5000 :
                            item.accesorio === 'chocolate' ? 7000 : 8000;

                const subtotal = (precio + accesorioPrecio) * item.cantidad;
                total += subtotal;

                carritoItems.innerHTML += `
                <div class="carrito-item">
                    <img src="${item.imagen}" alt="${item.nombre}">
                    <div>
                        <h3>${item.nombre}</h3>
                        <p>Cantidad: ${item.cantidad}</p>
                        ${item.mensaje ? `<p>Mensaje: ${item.mensaje}</p>` : ''}
                        ${item.accesorio !== 'ninguno' ? `<p>Accesorio: ${item.accesorio}</p>` : ''}
                        <p>Subtotal: $${subtotal.toLocaleString()}</p>
                        <button class="eliminar-item" data-index="${index}">Eliminar</button>
                    </div>
                </div>
            `;
            });

            carritoTotal.textContent = total.toLocaleString();
            localStorage.setItem('carrito', JSON.stringify(carrito));
            cartButton.setAttribute('data-count', carrito.length);
            cartButton.style.backgroundColor = carrito.length > 0 ? '#8cbaa3' : '#a8d5ba';
        }

        function agregarAlCarrito() {
            const cantidad = parseInt(document.getElementById('cantidad').value);
            const mensaje = document.getElementById('mensaje-flor').value;
            const accesorio = document.getElementById('accesorios').value;

            const nuevoItem = {
                ...datosFlores[currentFlowerIndex],
                cantidad: cantidad,
                mensaje: mensaje,
                accesorio: accesorio
            };

            carrito.push(nuevoItem);

            // Mostrar confirmación
            const confirmacion = document.getElementById('confirmacion-agregado');
            confirmacion.style.display = 'block';
            setTimeout(() => confirmacion.style.display = 'none', 2000);

            actualizarCarrito();
            modal.style.display = 'none';
        }

        cartButton.addEventListener('click', () => {
            carritoModal.style.display = 'block';
            actualizarCarrito(); // Para refrescar los items
        });

        agregarCarritoBtn.addEventListener('click', agregarAlCarrito);

        // Eliminar item individual
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('eliminar-item')) {
                const index = e.target.dataset.index;
                carrito.splice(index, 1);
                actualizarCarrito();
            }
        });

        // Vaciar carrito
        const vaciarCarritoBtn = document.getElementById('vaciar-carrito');
        vaciarCarritoBtn.addEventListener('click', () => {
            carrito = [];
            actualizarCarrito();
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // 1. Obtener referencias a los elementos del modal (los mismos que en el primer script)
            const modal = document.getElementById("modal");
            const modalTitulo = document.getElementById("modal-titulo");
            const modalImagen = document.getElementById("modal-imagen");
            const modalDescripcion = document.getElementById("modal-descripcion");
            const modalPrecio = document.getElementById("modal-precio");
            let currentFlowerIndex = 0; // Variable para rastrear el producto seleccionado
        
            // 2. Datos de productos para búsqueda (deben coincidir con datosFlores del primer script)
            const productos = [
                { id: "ramo-1", nombre: "Ramo de Rosas", imagen: "imagenes/ramo-1.jpeg" },
                { id: "ramo-2", nombre: "Ramo de Tulipanes", imagen: "imagenes/ramo-2.png" },
                { id: "ramo-3", nombre: "Ramo de Lirios", imagen: "imagenes/ramo-3.jpg" },
                { id: "ramo-4", nombre: "Ramo Mixto", imagen: "imagenes/ramo-4.jpg" },
                { id: "ramo-5", nombre: "Ramo de Margaritas", imagen: "imagenes/ramo-5.jpg" },
                { id: "ramo-6", nombre: "Ramo de Girasoles", imagen: "imagenes/ramo-6.jpg" },
                { id: "ramo-7", nombre: "Ramo de Claveles", imagen: "imagenes/ramo-7.jpg" },
                { id: "ramo-8", nombre: "Ramo de Peonias", imagen: "imagenes/ramo-8.jpg" },
                { id: "manojo-1", nombre: "Manojo de Lavanda", imagen: "imagenes/manojo-1.jpeg" },
                { id: "manojo-2", nombre: "Manojo de Romero", imagen: "imagenes/manojo-2.jpeg" },
                { id: "manojo-3", nombre: "Manojo de Eucalipto", imagen: "imagenes/manojo-3.jpeg" },
                { id: "manojo-4", nombre: "Manojo de Hierbabuena", imagen: "imagenes/manojo-4.jpeg" },
                { id: "manojo-5", nombre: "Manojo de Albahaca", imagen: "imagenes/manojo-5.jpeg" },
                { id: "manojo-6", nombre: "Manojo de Cilantro", imagen: "imagenes/manojo-6.jpeg" },
                { id: "manojo-7", nombre: "Manojo de Tomillo", imagen: "imagenes/manojo-7.jpg" },
                { id: "manojo-8", nombre: "Manojo de Menta", imagen: "imagenes/manojo-8.jpg" }
            ];
        
            // 3. Datos completos de flores (deben coincidir exactamente con los del primer script)
            const datosFlores = [
                // Productos destacados
                { nombre: "Productos destacados 1", imagen: "imagenes/ramo-1.jpeg", descripcion: "Un hermoso ramo de flores variadas.", precio: "$25.000" },
                { nombre: "Productos destacados 2", imagen: "imagenes/manojo-2.jpeg", descripcion: "Manojo de rosas blancas y rojas.", precio: "$18.000" },
                { nombre: "Productos destacados 3", imagen: "imagenes/ramo-4.jpg", descripcion: "Ramo de liliums y rosas.", precio: "$26.000" },
                { nombre: "Productos destacados 4", imagen: "imagenes/manojo-5.jpeg", descripcion: "Manojo de margaritas.", precio: "$21.000" },
                { nombre: "Productos destacados 5", imagen: "imagenes/ramo-6.jpg", descripcion: "Ramo de flores silvestres.", precio: "$23.000" },
                { nombre: "Productos destacados 6", imagen: "imagenes/manojo-3.jpeg", descripcion: "Manojo de claveles.", precio: "$17.000" },
                { nombre: "Productos destacados 7", imagen: "imagenes/ramo-6.jpg", descripcion: "Ramo de flores variadas.", precio: "$24.000" },
                { nombre: "Productos destacados 8", imagen: "imagenes/manojo-5.jpeg", descripcion: "Manojo de margaritas.", precio: "$21.000" },
                { nombre: "Productos destacados 9", imagen: "imagenes/manojo-2.jpeg", descripcion: "Manojo de rosas blancas y rojas.", precio: "$18.000" },
                // Productos de temporada
                { nombre: "Flor de temporada 1", imagen: "imagenes/ramo-1.jpeg", descripcion: "Ramo de flores de temporada.", precio: "$20.000" },
                { nombre: "Flor de temporada 2", imagen: "imagenes/ramo-2.png", descripcion: "Ramo de tulipanes.", precio: "$22.000" },
                { nombre: "Flor de temporada 3", imagen: "imagenes/ramo-3.jpg", descripcion: "Ramo de liliums.", precio: "$24.000" },
                { nombre: "Flor de temporada 4", imagen: "imagenes/ramo-4.jpg", descripcion: "Ramo de girasoles y margaritas.", precio: "$21.000" }
            ];
        
            // 4. Configuración de la búsqueda
            const searchInput = document.getElementById("search-input");
            const searchResults = document.getElementById("search-results");
        
            searchInput.addEventListener("input", function () {
                const query = this.value.trim().toLowerCase();
                searchResults.innerHTML = "";
        
                if (query.length > 0) {
                    const filtrados = productos.filter(producto =>
                        producto.nombre.toLowerCase().includes(query) || 
                        producto.id.toLowerCase().includes(query)
                    );
                    mostrarResultados(filtrados);
                } else {
                    searchResults.style.display = "none";
                }
            });
        
            function mostrarResultados(filtrados) {
                if (filtrados.length === 0) {
                    searchResults.style.display = "none";
                    return;
                }
        
                searchResults.style.display = "block";
                searchResults.innerHTML = ""; // Limpiar resultados anteriores
        
                filtrados.forEach(producto => {
                    const div = document.createElement("div");
                    div.className = "resultado-busqueda";
                    div.innerHTML = `
                        <img src="${producto.imagen}" alt="${producto.nombre}" width="40">
                        <span>${producto.nombre}</span>
                    `;
                    div.addEventListener("click", () => abrirModalProducto(producto));
                    searchResults.appendChild(div);
                });
            }
        
            // 5. Función para abrir el modal
            function abrirModalProducto(producto) {
                console.log("Abriendo modal para:", producto);
                
                // Buscar el producto en datosFlores por la imagen
                const productoCompleto = datosFlores.find(item => item.imagen === producto.imagen);
                
                if (productoCompleto) {
                    modalTitulo.textContent = productoCompleto.nombre;
                    modalImagen.src = productoCompleto.imagen;
                    modalDescripcion.textContent = productoCompleto.descripcion;
                    modalPrecio.textContent = `Precio: ${productoCompleto.precio}`;
                    modal.style.display = "flex";
                    
                    // Actualizar el índice para el carrito
                    currentFlowerIndex = datosFlores.indexOf(productoCompleto);
                } else {
                    console.error("Producto no encontrado en datosFlores:", producto);
                    alert("Producto no disponible temporalmente");
                }
                
                searchResults.style.display = "none";
            }
        
            // 6. Cerrar resultados al hacer clic fuera
            document.addEventListener("click", function (event) {
                if (!searchInput.contains(event.target) && !searchResults.contains(event.target)) {
                    searchResults.style.display = "none";
                }
            });
        });
        </script>
</body>

</html>